# NekoBox 新主页设计预览

## 🎨 完整视觉效果

### 主页（未连接状态）
```
╔════════════════════════════════════════╗
║  ≡  NekoBox          [⚙️]  [📊]       ║  ← 顶部工具栏
╠════════════════════════════════════════╣
║                                        ║
║                                        ║
║          到期: 2026-12-24              ║  ← 订阅信息（居中，灰色小字）
║                                        ║
║  ╔══════════════════════════════════╗ ║
║  ║                                  ║ ║
║  ║             ○                   ║ ║  ← 空心圆圈图标（灰色）
║  ║                                  ║ ║     64x64 大小
║  ║          连接                   ║ ║  ← 大字（28sp，加粗）
║  ║                                  ║ ║
║  ║      点击连接 VPN                ║ ║  ← 提示文字（14sp）
║  ║                                  ║ ║
║  ╚══════════════════════════════════╝ ║  ← 超大卡片，200dp 高
║                                        ║     圆角 24dp，阴影 8dp
║                                        ║
║  ╔══════════════════════════════════╗ ║
║  ║   代理模式                        ║ ║  ← 模式切换卡片
║  ║                                  ║ ║
║  ║  ┌─────────────┬─────────────┐  ║ ║
║  ║  │ 📋 规则模式  │  🌍 全局模式  │  ║ ║  ← Segmented Button
║  ║  └─────────────┴─────────────┘  ║ ║     规则模式默认选中（深色）
║  ╚══════════════════════════════════╝ ║
║                                        ║
║  ╔══════════════════════════════════╗ ║
║  ║  当前节点                        ║ ║  ← 节点选择卡片
║  ║                                  ║ ║
║  ║  🌐 自动选择                     ║ ║  ← 节点名称（16sp 加粗）
║  ║  延迟: --                 ▼     ║ ║  ← 延迟 + 展开箭头
║  ╚══════════════════════════════════╝ ║
║                                        ║
║  ╔══════════════════════════════════╗ ║
║  ║  📊 流量统计              ▼     ║ ║  ← 流量卡片（可展开）
║  ║  今日: ↑ 12.5MB  ↓ 156.8MB     ║ ║
║  ╚══════════════════════════════════╝ ║
║                                        ║
╚════════════════════════════════════════╝
```

---

### 主页（已连接状态）
```
╔════════════════════════════════════════╗
║  ≡  NekoBox          [⚙️]  [📊]       ║
╠════════════════════════════════════════╣
║                                        ║
║          到期: 2026-12-24              ║
║        ↑ 256KB/s  ↓ 1.2MB/s           ║  ← 实时速度（已连接时显示）
║                                        ║
║  ╔══════════════════════════════════╗ ║
║  ║                                  ║ ║
║  ║            ⬤ 95%               ║ ║  ← 实心圆 + 信号强度（绿色）
║  ║                                  ║ ║     外圈有旋转的进度环
║  ║          断开                   ║ ║  ← "断开"文字（绿色背景）
║  ║                                  ║ ║
║  ║        00:15:32                 ║ ║  ← 连接时长（动态更新）
║  ║                                  ║ ║
║  ╚══════════════════════════════════╝ ║  ← 绿色背景卡片
║                                        ║
║  ╔══════════════════════════════════╗ ║
║  ║   代理模式                        ║ ║
║  ║  ┌─────────────┬─────────────┐  ║ ║
║  ║  │ 📋 规则模式  │ 🌍 全局模式   │  ║ ║
║  ║  └─────────────┴─────────────┘  ║ ║
║  ╚══════════════════════════════════╝ ║
║                                        ║
║  ╔══════════════════════════════════╗ ║
║  ║  当前节点                        ║ ║
║  ║                                  ║ ║
║  ║  🇭🇰 HK-01 (香港)           ⚡  ║ ║  ← 最快节点标记
║  ║  ●●●●● 12ms              ▼     ║ ║  ← 信号格 + 延迟 + 箭头
║  ╚══════════════════════════════════╝ ║
║                                        ║
║  ╔══════════════════════════════════╗ ║
║  ║  📊 流量统计              ▼     ║ ║
║  ║  今日: ↑ 12.5MB  ↓ 156.8MB     ║ ║
║  ╚══════════════════════════════════╝ ║
║                                        ║
╚════════════════════════════════════════╝
```

---

### 主页（连接中状态）
```
╔════════════════════════════════════════╗
║  ≡  NekoBox          [⚙️]  [📊]       ║
╠════════════════════════════════════════╣
║                                        ║
║          到期: 2026-12-24              ║
║                                        ║
║  ╔══════════════════════════════════╗ ║
║  ║                                  ║ ║
║  ║            ⭕                   ║ ║  ← 旋转的加载圈（蓝色）
║  ║                                  ║ ║     带动画效果
║  ║         连接中...               ║ ║  ← "连接中..."文字
║  ║                                  ║ ║
║  ║    正在连接到 HK-01              ║ ║  ← 提示信息
║  ║                                  ║ ║
║  ╚══════════════════════════════════╝ ║  ← 蓝色背景，渐变动画
║                                        ║
║  [规则模式] [全局模式]  ← 禁用状态   ║
║                                        ║
║  [🇭🇰 HK-01]           ← 禁用状态   ║
║                                        ║
╚════════════════════════════════════════╝
```

---

## 🎯 节点选择底部弹窗

### 弹出动画
```
主页 (按钮状态)
    ↓ 点击"当前节点"卡片
    ↓ 从底部滑入（300ms）
┌────────────────────────────────────┐
│ ──────                            │  ← 把手（可拖动）
├────────────────────────────────────┤
│ 选择节点        [测速] [✕]         │  ← 标题栏
├────────────────────────────────────┤
│                                    │
│ ┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓ │
│ ┃ ⚡ 自动选择（推荐）          ✓ ┃ │  ← 自动模式（默认选中）
│ ┃ 根据延迟和负载自动选择最优     ┃ │     绿色勾选标记
│ ┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛ │
│                                    │
│ ━━━━━━━━━━ 香港节点 ━━━━━━━━━━  │  ← 分组标题
│                                    │
│ ┌──────────────────────────────┐  │
│ │ 🇭🇰 HK-01          12ms ⚡   │  │  ← 最快节点
│ │ ●●●●● 负载: 15%             │  │     5格信号（全满）
│ └──────────────────────────────┘  │     橙色⚡标记
│                                    │
│ ┌──────────────────────────────┐  │
│ │ 🇭🇰 HK-02          15ms      │  │
│ │ ●●●●○ 负载: 25%             │  │     4格信号
│ └──────────────────────────────┘  │
│                                    │
│ ┌──────────────────────────────┐  │
│ │ 🇭🇰 HK-03      [测速中...]    │  │  ← 正在测速的节点
│ │ [━━━━━━━━        ] 60%      │  │     进度条
│ └──────────────────────────────┘  │
│                                    │
│ ━━━━━━━━━━ 美国节点 ━━━━━━━━━━  │
│                                    │
│ ┌──────────────────────────────┐  │
│ │ 🇺🇸 US-01         156ms      │  │
│ │ ●●○○○ 负载: 65%             │  │     2格信号
│ └──────────────────────────────┘  │
│                                    │
│ ┌──────────────────────────────┐  │
│ │ 🇺🇸 US-02         [超时]     │  │  ← 失败节点
│ │ [❌ 连接超时]                │  │     红色错误标记
│ └──────────────────────────────┘  │
│                                    │
│ ━━━━━━━━━━ 日本节点 ━━━━━━━━━━  │
│                                    │
│ ┌──────────────────────────────┐  │
│ │ 🇯🇵 JP-01          45ms      │  │
│ │ ●●●○○ 负载: 35%             │  │     3格信号
│ └──────────────────────────────┘  │
│                                    │
└────────────────────────────────────┘
```

### 节点项详细设计

#### 节点项结构
```
┌──────────────────────────────────────┐
│ 🇭🇰  HK-01 (香港)           12ms ⚡  │  ← 国旗 + 名称 + 延迟 + 最快标记
│      ●●●●● 负载: 15%                 │  ← 信号强度 + 负载
└──────────────────────────────────────┘
```

#### 信号强度等级
```
延迟:
  0-50ms    ●●●●● (5格，绿色)  ← 优秀
  51-100ms  ●●●●○ (4格，绿色)  ← 良好
  101-200ms ●●●○○ (3格，黄色)  ← 一般
  201-500ms ●●○○○ (2格，橙色)  ← 较慢
  >500ms    ●○○○○ (1格，红色)  ← 很慢
  超时      [❌]   (红色标记)   ← 失败
```

---

## 🎯 交互流程演示

### 1. 启动应用
```
[打开应用]
    ↓
检查登录状态
    ↓
已登录 → 显示主页（未连接状态）
    │
    ├─ 加载订阅信息：显示"到期: XXXX-XX-XX"
    ├─ 连接按钮显示"连接"（灰色）
    ├─ 模式默认"规则模式"
    └─ 节点显示"自动选择"
```

### 2. 点击连接按钮
```
[点击"连接"按钮]
    ↓
检查节点选择
    ↓
┌────────────────────────────┐
│ 节点状态？                  │
│   自动 → 选择最优节点        │
│   手动 → 使用选择的节点      │
└────────────────────────────┘
    ↓
按钮变为"连接中..."（蓝色）
显示旋转加载动画 ⭕
    ↓
请求 VPN 权限（首次）
    ↓
开始连接
    ↓
连接成功！
    ↓
按钮变为"断开"（绿色）
显示实心圆 ⬤ + 外圈进度环
显示连接时长 "00:00:01"
显示实时速度 "↑ 256KB/s  ↓ 1.2MB/s"
    ↓
后台开始测速其他节点
节点列表实时更新延迟和排序
```

### 3. 切换模式
```
[当前：规则模式]
    ↓
点击"全局模式"
    ↓
按钮切换动画（200ms）
- 规则模式变为轮廓样式（灰色）
- 全局模式变为填充样式（深色）
    ↓
如果已连接：
  Toast提示："已切换到全局模式"
  后台应用新规则
如果未连接：
  仅保存选择，下次生效
```

### 4. 选择节点
```
[点击"当前节点"卡片]
    ↓
底部弹窗滑入（300ms）
显示节点列表
    ↓
自动开始测速（如果未测速）
    ↓
节点按延迟排序：
  ┌─────────────────────┐
  │ ⚡ 自动选择    [✓]  │  ← 置顶
  ├─────────────────────┤
  │ 🇭🇰 HK-01  12ms ⚡  │  ← 最快
  │ 🇭🇰 HK-02  15ms     │
  │ 🇭🇰 HK-03  28ms     │
  │ 🇺🇸 US-01  156ms    │
  │ 🇺🇸 US-02  [超时]   │  ← 最慢
  └─────────────────────┘
    ↓
[点击 HK-02]
    ↓
✓ 标记移到 HK-02
卡片背景高亮
    ↓
如果已连接：
  Toast："正在切换到 HK-02..."
  断开当前连接
  连接到 HK-02
  弹窗自动关闭
如果未连接：
  保存选择
  弹窗自动关闭
  主页显示："🇭🇰 HK-02"
```

### 5. 实时测速
```
节点列表打开时：
    ↓
检查节点延迟数据
    ↓
如果没有 → 开始测速
    ↓
┌──────────────────────┐
│ 🇭🇰 HK-01            │
│ ⏱️ 测速中...         │  ← 测速状态
│ [━━━━━━    ] 60%    │  ← 进度条
└──────────────────────┘
    ↓ 测速完成（约1-2秒）
┌──────────────────────┐
│ 🇭🇰 HK-01      12ms ⚡│  ← 显示结果
│ ●●●●● 负载: 15%     │  ← 标记最快
└──────────────────────┘
    ↓
继续测速下一个节点
    ↓
测速完成后自动重新排序
列表平滑动画重排
```

---

## 🎨 详细布局规格

### 连接按钮卡片
```
MaterialCardView:
  width: match_parent
  height: 200dp
  marginTop: 24dp
  marginHorizontal: 0dp
  cornerRadius: 24dp
  elevation: 8dp
  
  内部布局（垂直居中）:
    Icon (64x64)
      ↓ margin 8dp
    Text "连接" (28sp, bold)
      ↓ margin 4dp
    Hint "点击连接 VPN" (14sp)
```

### 模式切换卡片
```
MaterialCardView:
  width: match_parent
  height: wrap_content
  marginTop: 16dp
  cornerRadius: 12dp
  elevation: 2dp
  padding: 16dp
  
  Title "代理模式" (12sp)
    ↓ margin 8dp
  MaterialButtonToggleGroup:
    - 规则模式按钮 (50% width, 48dp height)
    - 全局模式按钮 (50% width, 48dp height)
```

### 节点选择卡片
```
MaterialCardView:
  width: match_parent
  height: wrap_content
  marginTop: 16dp
  cornerRadius: 12dp
  elevation: 2dp
  padding: 16dp
  clickable: true
  
  左侧：
    Label "当前节点" (12sp, secondary color)
    NodeName "🌐 自动选择" (16sp, bold)
    Latency "延迟: 12ms" (12sp, secondary)
  
  右侧：
    ▼ Arrow icon (24x24)
```

### 流量统计卡片
```
MaterialCardView:
  width: match_parent
  height: wrap_content
  marginTop: 16dp
  cornerRadius: 12dp
  elevation: 2dp
  padding: 16dp
  
  折叠时（48dp height）:
    Title "📊 流量统计" + ▼ icon
    Summary "今日: ↑ 12.5MB  ↓ 156.8MB"
  
  展开时（~200dp height）:
    Title "📊 流量统计" + ▲ icon
    Today traffic
    Month traffic
    Progress bar
    Quota info
    Expire info
```

---

## 🎨 节点列表底部弹窗

### BottomSheet 规格
```
BottomSheetDialog:
  peekHeight: 300dp
  maxHeight: 80% screen height
  cornerRadius: 16dp (顶部圆角)
  
  顶部把手:
    width: 48dp
    height: 4dp
    marginTop: 12dp
    color: divider color
  
  标题栏:
    height: 56dp
    padding: 16dp
    
    Left: "选择节点" (20sp, bold)
    Right: [测速] button + [✕] close button
```

### 节点列表项规格
```
RecyclerView item:
  MaterialCardView:
    width: match_parent
    height: wrap_content
    marginHorizontal: 16dp
    marginVertical: 4dp
    cornerRadius: 8dp
    elevation: 1dp
    
    内部布局:
      Left:
        Flag 🇭🇰 (32x32)
      
      Center:
        NodeName "HK-01 (香港)" (16sp, bold)
        SignalBars ●●●●● (5x 8dp circles)
        LoadInfo "负载: 15%" (12sp)
      
      Right:
        Latency "12ms" (14sp, bold, primary color)
        FastestBadge "⚡ 最快" (optional)
        CheckIcon ✓ (optional, when selected)
```

---

## 🎨 颜色状态

### 连接按钮颜色
```
未连接:
  background: #E0E0E0 (浅灰)
  icon: #757575 (中灰)
  text: #424242 (深灰)

连接中:
  background: #2196F3 (蓝色) + 渐变动画
  icon: #FFFFFF (白色) + 旋转动画
  text: #FFFFFF (白色)

已连接:
  background: #4CAF50 (绿色)
  icon: #FFFFFF (白色) + 进度环
  text: #FFFFFF (白色)
  speed: #FFFFFF (白色)
  duration: #E8F5E9 (浅绿)
```

### 模式按钮颜色
```
选中:
  background: #1976D2 (深蓝)
  text: #FFFFFF (白色)
  border: none

未选中:
  background: transparent
  text: #757575 (灰色)
  border: 1dp solid #BDBDBD
```

### 节点项颜色
```
正常:
  background: #FFFFFF (白色)
  text: #212121 (黑色)
  latency: #1976D2 (蓝色)

选中:
  background: #E3F2FD (浅蓝)
  check: #1976D2 (蓝色)

最快:
  badge: #FF9800 (橙色)
  badge text: #FFFFFF (白色)

失败:
  text: #757575 (灰色)
  error: #F44336 (红色)
```

---

## 📐 尺寸标准

### 间距（Spacing）
```
卡片外边距: 16dp
卡片内边距: 16dp
元素间距: 8dp
大间距: 24dp
小间距: 4dp
```

### 字体大小（Typography）
```
标题: 20sp (bold)
大标题: 28sp (bold)  ← 连接按钮
正文: 16sp
小字: 14sp
提示: 12sp
```

### 圆角（Corner Radius）
```
大卡片: 24dp  ← 连接按钮
中卡片: 12dp  ← 功能卡片
小卡片: 8dp   ← 节点项
按钮: 20dp
```

### 阴影（Elevation）
```
连接按钮: 8dp
功能卡片: 2dp
节点项: 1dp
弹窗: 16dp
```

---

## 🎯 设计亮点

### 1. 超大连接按钮 ⭐
- **高度 200dp**：手指很容易点击
- **居中设计**：视觉焦点
- **状态清晰**：颜色 + 图标 + 文字三重反馈
- **动画丰富**：旋转、渐变、进度环

### 2. 智能节点排序 🧠
- **自动测速**：打开列表自动测速
- **实时排序**：延迟更新后自动重排
- **视觉标记**：最快节点有⚡标记
- **信号格**：5格信号直观显示质量

### 3. 模式切换简洁 🔄
- **Segmented Button**：Material 3 标准组件
- **一目了然**：当前模式高亮显示
- **即时生效**：连接中也可切换

### 4. 流量可视化 📊
- **默认折叠**：不占空间
- **点击展开**：详细信息
- **进度条**：流量使用百分比
- **到期提醒**：剩余天数

---

## 📱 响应式适配

### 竖屏布局（默认）
```
- 单列布局
- 连接按钮 200dp
- 卡片全宽
```

### 横屏布局
```
- 左侧：连接按钮 + 模式
- 右侧：节点 + 流量
- 充分利用宽度
```

### 平板布局
```
- 居中最大宽度 600dp
- 字体放大 10%
- 更大的间距
```

---

## 🎉 这个设计的优势

✅ **极简风格**：参考 Hiddify，一屏显示所有功能  
✅ **操作便捷**：大按钮，易点击，流程顺畅  
✅ **信息丰富**：速度、延迟、流量、到期一目了然  
✅ **智能自动**：自动选择最优节点，自动测速排序  
✅ **视觉现代**：Material Design 3，支持深色模式  
✅ **动画流畅**：所有操作都有动画反馈  

---

**你觉得这个设计怎么样？需要调整吗？** 😊

如果满意，我可以立即实现完整的代码！

