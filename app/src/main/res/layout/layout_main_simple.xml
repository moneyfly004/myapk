<?xml version="1.0" encoding="utf-8"?>
<androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <!-- é¡¶éƒ¨ AppBar -->
    <com.google.android.material.appbar.AppBarLayout
        android:id="@+id/app_bar"
        android:layout_width="match_parent"
        android:layout_height="wrap_content">

        <com.google.android.material.appbar.MaterialToolbar
            android:id="@+id/toolbar"
            android:layout_width="match_parent"
            android:layout_height="?attr/actionBarSize"
            app:navigationIcon="@drawable/ic_action_navigation"
            app:title="NekoBox">

            <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="match_parent"
                android:layout_gravity="end"
                android:orientation="horizontal">

                <ImageButton
                    android:id="@+id/btn_settings"
                    android:layout_width="48dp"
                    android:layout_height="48dp"
                    android:background="?attr/selectableItemBackgroundBorderless"
                    android:contentDescription="è®¾ç½®"
                    android:src="@drawable/ic_action_settings" />

                <ImageButton
                    android:id="@+id/btn_stats"
                    android:layout_width="48dp"
                    android:layout_height="48dp"
                    android:background="?attr/selectableItemBackgroundBorderless"
                    android:contentDescription="ç»Ÿè®¡"
                    android:src="@drawable/ic_baseline_transform_24" />
            </LinearLayout>
        </com.google.android.material.appbar.MaterialToolbar>
    </com.google.android.material.appbar.AppBarLayout>

    <!-- ä¸»å†…å®¹åŒºåŸŸ -->
    <androidx.core.widget.NestedScrollView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        app:layout_behavior="@string/appbar_scrolling_view_behavior">

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:padding="24dp">

            <!-- è®¢é˜…ä¿¡æ¯å¡ç‰‡åˆ—è¡¨ -->
            <androidx.recyclerview.widget.RecyclerView
                android:id="@+id/subscription_info_recycler"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:nestedScrollingEnabled="false"
                android:orientation="vertical"
                app:layoutManager="androidx.recyclerview.widget.LinearLayoutManager" />

            <!-- è¶…å¤§è¿žæŽ¥æŒ‰é’® -->
            <com.google.android.material.card.MaterialCardView
                android:id="@+id/connect_card"
                android:layout_width="match_parent"
                android:layout_height="200dp"
                android:layout_marginTop="24dp"
                app:cardCornerRadius="24dp"
                app:cardElevation="8dp">

                <androidx.constraintlayout.widget.ConstraintLayout
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:background="?attr/colorSurface"
                    android:clickable="true"
                    android:focusable="true"
                    android:foreground="?attr/selectableItemBackground">

                    <!-- çŠ¶æ€å›¾æ ‡ -->
                    <ImageView
                        android:id="@+id/connect_icon"
                        android:layout_width="64dp"
                        android:layout_height="64dp"
                        android:layout_marginBottom="8dp"
                        android:contentDescription="è¿žæŽ¥çŠ¶æ€"
                        android:src="@drawable/ic_action_settings"
                        android:tint="?attr/colorPrimary"
                        app:layout_constraintBottom_toTopOf="@id/connect_text"
                        app:layout_constraintEnd_toEndOf="parent"
                        app:layout_constraintStart_toStartOf="parent"
                        app:layout_constraintTop_toTopOf="parent"
                        app:layout_constraintVertical_chainStyle="packed" />

                    <!-- è¿›åº¦çŽ¯ï¼ˆè¿žæŽ¥æ—¶æ˜¾ç¤ºï¼‰ -->
                    <com.google.android.material.progressindicator.CircularProgressIndicator
                        android:id="@+id/connect_progress"
                        android:layout_width="80dp"
                        android:layout_height="80dp"
                        android:indeterminate="true"
                        android:visibility="gone"
                        app:indicatorSize="80dp"
                        app:layout_constraintBottom_toBottomOf="@id/connect_icon"
                        app:layout_constraintEnd_toEndOf="@id/connect_icon"
                        app:layout_constraintStart_toStartOf="@id/connect_icon"
                        app:layout_constraintTop_toTopOf="@id/connect_icon"
                        app:trackThickness="4dp" />

                    <!-- è¿žæŽ¥æ–‡æœ¬ -->
                    <TextView
                        android:id="@+id/connect_text"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginTop="8dp"
                        android:text="è¿žæŽ¥"
                        android:textColor="?attr/colorOnSurface"
                        android:textSize="28sp"
                        android:textStyle="bold"
                        app:layout_constraintBottom_toTopOf="@id/connect_hint"
                        app:layout_constraintEnd_toEndOf="parent"
                        app:layout_constraintStart_toStartOf="parent"
                        app:layout_constraintTop_toBottomOf="@id/connect_icon" />

                    <!-- æç¤ºæ–‡æœ¬ -->
                    <TextView
                        android:id="@+id/connect_hint"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginTop="4dp"
                        android:layout_marginBottom="16dp"
                        android:text="ç‚¹å‡»è¿žæŽ¥ VPN"
                        android:textColor="?android:attr/textColorSecondary"
                        android:textSize="14sp"
                        app:layout_constraintBottom_toBottomOf="parent"
                        app:layout_constraintEnd_toEndOf="parent"
                        app:layout_constraintStart_toStartOf="parent"
                        app:layout_constraintTop_toBottomOf="@id/connect_text" />
                </androidx.constraintlayout.widget.ConstraintLayout>
            </com.google.android.material.card.MaterialCardView>

            <!-- æ¨¡å¼åˆ‡æ¢ -->
            <com.google.android.material.card.MaterialCardView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="16dp"
                app:cardCornerRadius="12dp"
                app:cardElevation="2dp">

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical"
                    android:padding="16dp">

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="ä»£ç†æ¨¡å¼"
                        android:textColor="?android:attr/textColorSecondary"
                        android:textSize="12sp" />

                    <com.google.android.material.button.MaterialButtonToggleGroup
                        android:id="@+id/mode_toggle_group"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:layout_marginTop="8dp"
                        app:checkedButton="@id/mode_rule"
                        app:selectionRequired="true"
                        app:singleSelection="true">

                        <com.google.android.material.button.MaterialButton
                            android:id="@+id/mode_rule"
                            style="@style/Widget.Material3.Button.OutlinedButton"
                            android:layout_width="0dp"
                            android:layout_height="48dp"
                            android:layout_weight="1"
                            android:text="ðŸ“‹ è§„åˆ™æ¨¡å¼"
                            android:textSize="14sp" />

                        <com.google.android.material.button.MaterialButton
                            android:id="@+id/mode_global"
                            style="@style/Widget.Material3.Button.OutlinedButton"
                            android:layout_width="0dp"
                            android:layout_height="48dp"
                            android:layout_weight="1"
                            android:text="ðŸŒ å…¨å±€æ¨¡å¼"
                            android:textSize="14sp" />
                    </com.google.android.material.button.MaterialButtonToggleGroup>
                </LinearLayout>
            </com.google.android.material.card.MaterialCardView>

            <!-- èŠ‚ç‚¹é€‰æ‹© -->
            <com.google.android.material.card.MaterialCardView
                android:id="@+id/node_selector_card"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="16dp"
                android:clickable="true"
                android:focusable="true"
                android:foreground="?attr/selectableItemBackground"
                app:cardCornerRadius="12dp"
                app:cardElevation="2dp">

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical"
                    android:padding="16dp">

                    <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:orientation="horizontal">

                        <LinearLayout
                            android:layout_width="0dp"
                            android:layout_height="wrap_content"
                            android:layout_weight="1"
                            android:orientation="vertical">

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="å½“å‰èŠ‚ç‚¹"
                                android:textColor="?android:attr/textColorSecondary"
                                android:textSize="12sp" />

                            <TextView
                                android:id="@+id/current_node_name"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_marginTop="4dp"
                                android:text="ðŸŒ è‡ªåŠ¨é€‰æ‹©"
                                android:textColor="?attr/colorOnSurface"
                                android:textSize="16sp"
                                android:textStyle="bold" />

                            <TextView
                                android:id="@+id/current_node_latency"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_marginTop="2dp"
                                android:text="å»¶è¿Ÿ: 12ms"
                                android:textColor="?android:attr/textColorSecondary"
                                android:textSize="12sp" />
                        </LinearLayout>

                        <ImageView
                            android:layout_width="24dp"
                            android:layout_height="24dp"
                            android:layout_gravity="center_vertical"
                            android:contentDescription="å±•å¼€"
                            android:src="@android:drawable/arrow_down_float"
                            android:tint="?android:attr/textColorSecondary" />
                    </LinearLayout>
                </LinearLayout>
            </com.google.android.material.card.MaterialCardView>

            <!-- æµé‡ç»Ÿè®¡å¡ç‰‡ -->
            <com.google.android.material.card.MaterialCardView
                android:id="@+id/traffic_card"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="16dp"
                android:clickable="true"
                android:focusable="true"
                android:foreground="?attr/selectableItemBackground"
                app:cardCornerRadius="12dp"
                app:cardElevation="2dp">

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical"
                    android:padding="16dp">

                    <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:orientation="horizontal">

                        <TextView
                            android:layout_width="0dp"
                            android:layout_height="wrap_content"
                            android:layout_weight="1"
                            android:text="ðŸ“Š æµé‡ç»Ÿè®¡"
                            android:textColor="?attr/colorOnSurface"
                            android:textSize="16sp"
                            android:textStyle="bold" />

                        <ImageView
                            android:id="@+id/traffic_expand_icon"
                            android:layout_width="24dp"
                            android:layout_height="24dp"
                            android:contentDescription="å±•å¼€"
                            android:src="@android:drawable/arrow_down_float"
                            android:tint="?android:attr/textColorSecondary" />
                    </LinearLayout>

                    <!-- ç®€è¦ä¿¡æ¯ï¼ˆå§‹ç»ˆæ˜¾ç¤ºï¼‰ -->
                    <TextView
                        android:id="@+id/traffic_summary"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginTop="8dp"
                        android:text="ä»Šæ—¥: â†‘ 12.5MB  â†“ 156.8MB"
                        android:textColor="?android:attr/textColorSecondary"
                        android:textSize="14sp" />

                    <!-- è¯¦ç»†ä¿¡æ¯ï¼ˆå¯å±•å¼€ï¼‰ -->
                    <LinearLayout
                        android:id="@+id/traffic_details"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:layout_marginTop="12dp"
                        android:orientation="vertical"
                        android:visibility="gone">

                        <View
                            android:layout_width="match_parent"
                            android:layout_height="1dp"
                            android:background="?android:attr/divider" />

                        <TextView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_marginTop="12dp"
                            android:text="æœ¬æœˆæµé‡"
                            android:textColor="?android:attr/textColorSecondary"
                            android:textSize="12sp" />

                        <TextView
                            android:id="@+id/traffic_monthly"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_marginTop="4dp"
                            android:text="â†‘ ä¸Šä¼  1.2 GB  â†“ ä¸‹è½½ 15.6 GB"
                            android:textColor="?attr/colorOnSurface"
                            android:textSize="14sp" />

                        <com.google.android.material.progressindicator.LinearProgressIndicator
                            android:id="@+id/traffic_progress"
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:layout_marginTop="12dp"
                            android:max="100"
                            android:progress="16" />

                        <TextView
                            android:id="@+id/traffic_quota"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_marginTop="4dp"
                            android:text="å·²ä½¿ç”¨ 16.8GB / 100GB (16.8%)"
                            android:textColor="?android:attr/textColorSecondary"
                            android:textSize="12sp" />

                        <TextView
                            android:id="@+id/traffic_expire"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_marginTop="8dp"
                            android:text="å‰©ä½™ 362 å¤©åˆ°æœŸ"
                            android:textColor="?android:attr/textColorSecondary"
                            android:textSize="12sp" />
                    </LinearLayout>
                </LinearLayout>
            </com.google.android.material.card.MaterialCardView>

        </LinearLayout>
    </androidx.core.widget.NestedScrollView>

</androidx.coordinatorlayout.widget.CoordinatorLayout>

