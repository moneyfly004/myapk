# NekoBox 新主页设计方案

## 🎨 设计理念

参考 Hiddify 的简洁风格，设计一个功能强大但界面简洁的主页。

---

## 📱 主页布局方案 A（推荐）

### 视觉效果
```
┌────────────────────────────────────┐
│  ≡  NekoBox         [⚙️]  [📊]     │  ← 顶部栏（菜单、标题、设置、统计）
├────────────────────────────────────┤
│                                    │
│         到期: 2026-12-24           │  ← 订阅信息（小字，灰色）
│          ↑ 256KB/s  ↓ 1.2MB/s     │  ← 实时速度（连接时显示）
│                                    │
│   ┌─────────────────────────┐    │
│   │                         │    │
│   │                         │    │
│   │         断开            │    │  ← 超大连接按钮
│   │                         │    │     未连接：灰色 "连接"
│   │       ⭕               │    │     连接中：蓝色 "连接中..."
│   │                         │    │     已连接：绿色 "断开" + 圆形进度
│   │     00:15:32            │    │     已连接时显示连接时长
│   │                         │    │
│   └─────────────────────────┘    │
│                                    │
│   ┌──────────────┬──────────────┐ │
│   │  📋 规则模式  │  🌍 全局模式  │ │  ← 模式切换（Segmented Button）
│   └──────────────┴──────────────┘ │     选中的高亮显示
│                                    │
│   ┌─────────────────────────────┐ │
│   │ 🌐 HK-01 (香港)         12ms │ │  ← 当前选中节点
│   │ 点击选择其他节点        ▼    │ │     显示延迟 + 展开图标
│   └─────────────────────────────┘ │
│                                    │
│   ┌─────────────────────────────┐ │
│   │ 📊 流量统计                  │ │  ← 可展开的流量统计卡片
│   │ 今日: ↑ 12.5MB  ↓ 156.8MB  │ │
│   │ 总计: ↑ 1.2GB   ↓ 15.6GB   │ │
│   └─────────────────────────────┘ │
│                                    │
└────────────────────────────────────┘
```

### 状态变化演示

#### 1. 未连接状态
```
┌─────────────────────────┐
│                         │
│                         │
│         连接            │  ← 灰色背景
│                         │
│         ○              │  ← 空心圆圈
│                         │
└─────────────────────────┘
```

#### 2. 连接中状态
```
┌─────────────────────────┐
│                         │
│       连接中...         │  ← 蓝色背景，渐变动画
│                         │
│        ⭕              │  ← 旋转的加载动画
│                         │
└─────────────────────────┘
```

#### 3. 已连接状态
```
┌─────────────────────────┐
│                         │
│         断开            │  ← 绿色背景
│                         │
│       ⬤ 95%           │  ← 实心圆 + 信号强度
│                         │
│     00:15:32           │  ← 连接时长
│   ↑ 256KB/s ↓ 1.2MB/s  │  ← 实时速度
└─────────────────────────┘
```

---

## 📱 主页布局方案 B（极简版）

### 视觉效果
```
┌────────────────────────────────────┐
│                                    │
│                                    │
│         [NekoBox Logo]             │
│                                    │
│   ┌─────────────────────────────┐ │
│   │                             │ │
│   │          连接               │ │  ← 超大按钮（屏幕中央）
│   │                             │ │
│   │          ○                 │ │
│   │                             │ │
│   └─────────────────────────────┘ │
│                                    │
│       🌐 HK-01 | 规则模式          │  ← 当前配置（一行显示）
│          12ms | 点击更改           │
│                                    │
│        到期: 2026-12-24            │  ← 订阅信息
│                                    │
└────────────────────────────────────┘
```

---

## 🎯 节点列表弹窗设计

### 视觉效果
```
┌────────────────────────────────────┐
│  选择节点              [✕]         │  ← 底部弹出式 Sheet
├────────────────────────────────────┤
│  [🔄 测速中...]     [⚙️ 自动选择]  │  ← 顶部操作栏
├────────────────────────────────────┤
│                                    │
│  ┌──────────────────────────────┐ │
│  │ ⚡ 自动选择（推荐）           │ │  ← 自动模式（默认）
│  │ 根据延迟和负载自动选择最优   │ │
│  │                         [✓]  │ │
│  └──────────────────────────────┘ │
│                                    │
│  ━━━━━━━━ 香港节点 ━━━━━━━━      │  ← 分组标题
│                                    │
│  ┌──────────────────────────────┐ │
│  │ 🇭🇰 HK-01           12ms ⚡  │ │  ← 最快节点（闪电标记）
│  │ ●●●●● 负载: 15%             │ │    5格信号强度
│  └──────────────────────────────┘ │
│                                    │
│  ┌──────────────────────────────┐ │
│  │ 🇭🇰 HK-02           15ms     │ │
│  │ ●●●●○ 负载: 25%             │ │    4格信号强度
│  └──────────────────────────────┘ │
│                                    │
│  ┌──────────────────────────────┐ │
│  │ 🇭🇰 HK-03           28ms     │ │
│  │ ●●●○○ 负载: 45%             │ │    3格信号强度
│  └──────────────────────────────┘ │
│                                    │
│  ━━━━━━━━ 美国节点 ━━━━━━━━      │
│                                    │
│  ┌──────────────────────────────┐ │
│  │ 🇺🇸 US-01          156ms     │ │
│  │ ●●○○○ 负载: 65%             │ │    2格信号强度
│  └──────────────────────────────┘ │
│                                    │
│  ┌──────────────────────────────┐ │
│  │ 🇺🇸 US-02          245ms     │ │
│  │ ●○○○○ 负载: 85%             │ │    1格信号强度
│  │ [超时]                       │ │    标记问题节点
│  └──────────────────────────────┘ │
│                                    │
└────────────────────────────────────┘
```

### 节点排序规则
```
1. 自动选择（置顶）
2. 按延迟排序（低延迟优先）
3. 按负载排序（低负载优先）
4. 按地区分组
5. 失败节点排最后
```

### 实时测速显示
```
┌──────────────────────────────┐
│ 🇭🇰 HK-01                    │
│ ⏱️ 测速中... [━━━━━━    ] │  ← 测速进度条
└──────────────────────────────┘
    ↓ 测速完成
┌──────────────────────────────┐
│ 🇭🇰 HK-01           12ms ⚡  │  ← 显示结果 + 最快标记
│ ●●●●● 负载: 15%             │
└──────────────────────────────┘
```

---

## 🎨 模式切换设计

### Segmented Button（推荐）
```
┌──────────────┬──────────────┐
│  📋 规则模式  │  🌍 全局模式  │
└──────────────┴──────────────┘
     ▲ 选中         未选中

选中状态：深色背景 + 白色文字
未选中：浅色背景 + 灰色文字
```

### Chip 风格（备选）
```
┌──────────┐  ┌──────────┐
│📋 规则模式 │  │ 🌍 全局模式│
└──────────┘  └──────────┘
     ▲ 选中       未选中

选中：填充背景 + 图标
未选中：轮廓边框
```

---

## 🎨 连接按钮详细设计

### 尺寸规格
```
宽度: match_parent (左右各留 24dp margin)
高度: 180dp
圆角: 24dp
阴影: elevation 8dp
```

### 颜色方案

#### 未连接
```
背景色: #E0E0E0 (浅灰)
文字色: #424242 (深灰)
图标色: #757575 (中灰)
```

#### 连接中
```
背景色: #2196F3 (蓝色) + 渐变动画
文字色: #FFFFFF (白色)
图标: 旋转的圆环动画
```

#### 已连接
```
背景色: #4CAF50 (绿色)
文字色: #FFFFFF (白色)
图标: 实心圆 + 外圈进度环
```

### 内部布局
```
┌─────────────────────────────┐
│         (16dp padding)      │
│                             │
│   [Icon]        (居中)      │  ← 48x48 图标
│                             │
│   连接           (居中)      │  ← 24sp 大字
│                             │
│   点击连接 VPN   (居中)      │  ← 12sp 提示文字
│                             │
│         (16dp padding)      │
└─────────────────────────────┘
```

---

## 📊 流量统计卡片设计

### 默认状态（折叠）
```
┌─────────────────────────────┐
│ 📊 流量统计              ▼  │
│ 今日: ↑ 12.5MB  ↓ 156.8MB  │
└─────────────────────────────┘
```

### 展开状态
```
┌─────────────────────────────┐
│ 📊 流量统计              ▲  │
├─────────────────────────────┤
│ 今日流量:                   │
│ ↑ 上传   12.5 MB            │
│ ↓ 下载   156.8 MB           │
│                             │
│ 本月流量:                   │
│ ↑ 上传   1.2 GB             │
│ ↓ 下载   15.6 GB            │
│                             │
│ 订阅总量: 100 GB            │
│ 已使用:   16.8 GB (16.8%)   │
│ [━━━━━━━━━━━━━━━━━━]       │
│                             │
│ 到期时间: 2026-12-24        │
│ 剩余天数: 362 天            │
└─────────────────────────────┘
```

---

## 🎯 交互流程

### 连接流程
```
1. 用户点击"连接"按钮
   ↓
2. 检查是否选择节点
   - 未选择 → 自动选择最优节点
   - 已选择 → 使用选择的节点
   ↓
3. 按钮变为"连接中..."（蓝色 + 动画）
   ↓
4. 请求 VPN 权限（首次）
   ↓
5. 开始连接
   ↓
6. 连接成功
   - 按钮变为"断开"（绿色）
   - 显示连接时长
   - 显示实时速度
   - 开始测速其他节点（后台）
```

### 节点选择流程
```
1. 用户点击"当前节点"卡片
   ↓
2. 底部弹出节点列表 (BottomSheet)
   ↓
3. 显示所有节点（按延迟排序）
   ↓
4. 后台开始测速（如果未测速）
   - 显示"测速中..."进度
   - 实时更新延迟数据
   - 自动重新排序
   ↓
5. 用户点击某个节点
   ↓
6. 如果已连接：
   - 断开当前连接
   - 连接新节点
   - Toast提示："正在切换到 HK-01..."
   如果未连接：
   - 保存选择
   - 关闭弹窗
```

### 模式切换流程
```
1. 用户点击"全局模式"
   ↓
2. Segmented Button 切换动画
   ↓
3. 如果已连接：
   - Toast提示："已切换到全局模式"
   - 后台应用新模式
   如果未连接：
   - 仅保存选择
   - 下次连接时生效
```

---

## 🎨 动画效果

### 连接按钮动画
```
连接中：
- 背景色渐变（蓝色深浅变化）
- 图标旋转（360度循环）
- 文字闪烁效果

已连接：
- 进度环旋转
- 速度数字滚动更新
- 时长每秒更新
```

### 节点列表动画
```
弹出：
- 从底部滑入（300ms）
- 带半透明遮罩

节点项：
- 点击时缩放效果（Scale 0.95）
- 选中时勾选动画

测速：
- 进度条填充动画
- 延迟数字滚动显示
- 排序时平滑位移
```

### 模式切换动画
```
- 选中状态滑动指示器
- 背景色渐变（200ms）
- 图标缩放效果
```

---

## 📱 响应式设计

### 小屏幕 (< 360dp)
```
- 连接按钮高度: 160dp
- 字体缩小 10%
- 卡片间距: 12dp
```

### 中屏幕 (360-480dp)
```
- 连接按钮高度: 180dp
- 标准字体
- 卡片间距: 16dp
```

### 大屏幕 (> 480dp)
```
- 连接按钮高度: 200dp
- 字体放大 5%
- 卡片间距: 20dp
- 两列布局（横屏）
```

---

## 🎨 配色方案

### Material Design 3 配色

#### 亮色主题
```
Primary:        #1976D2 (蓝色)
Secondary:      #424242 (深灰)
Success:        #4CAF50 (绿色)
Surface:        #FFFFFF (白色)
Background:     #F5F5F5 (浅灰)
OnPrimary:      #FFFFFF (白色)
OnSurface:      #212121 (黑色)
```

#### 暗色主题
```
Primary:        #64B5F6 (浅蓝)
Secondary:      #BDBDBD (浅灰)
Success:        #81C784 (浅绿)
Surface:        #1E1E1E (深灰)
Background:     #121212 (黑色)
OnPrimary:      #000000 (黑色)
OnSurface:      #FFFFFF (白色)
```

---

## 🎯 推荐方案

我推荐 **方案 A**，因为：

1. ✅ **功能完整**：所有必要信息一屏展示
2. ✅ **层次清晰**：连接 → 模式 → 节点 → 统计
3. ✅ **操作方便**：所有操作都在主页完成
4. ✅ **视觉舒适**：Material Design 3 标准
5. ✅ **信息丰富**：速度、流量、时长一目了然

---

你觉得哪个方案更好？还是需要我调整设计？😊

